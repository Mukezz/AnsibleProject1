-
    name: 'Deploy web application and database'
    hosts: server
    tasks:
        - name: 'Install all the dependant packages using yum ansible module'
          yum: 
            name:
                - firewalld
                - mariadb-server
                - httpd
                - php
                - php-mysql
                - git
            state: present
        - name: 'Start the services'
          service:
            name:
                - firewalld
                - mariadb
                - httpd
            state: started
        - name: 'Download git code'
          command: "git clone {{ item }}" 
          witj_items:
            - https://github.com/kodekloudhub/learning-app-ecommerce.git /var/www/html/
            - https://github.com/Mukezz/AnsibleProject1.git /Ansible/project1/
        - name: 'Database creation'
          shell: /Ansible/project1/db.sh >> /tmp/db.log
          args:
            creates: /tmp/db.log

